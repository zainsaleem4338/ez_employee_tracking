<% content_for :head do %>
  <%= javascript_include_tag 'employee_tasks' %>
<% end %>
<% provide(:title, "My Tasks") %>

<div class="alert alert-success alert-dismissable present" id="logtime_success_alert" style="display: none;">
  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">
    ×
  </button>
  <h4>
    Success!
  </h4><br>Task logtime updated.
</div>

<div class="alert alert-success alert-dismissable present" id="logtime_failure_alert" style="display: none;">
  <button type="button" class="close" data-dismiss="alert" aria-hidden="true">
    ×
  </button>
  <h4>
    Failure!
  </h4><br>Failed to add logtime.
</div>

<div class="container">
  <table id="tasks_table" class="table table-striped table-bordered" style="width:100%">
  <thead>
    <tr>
      <th>Task Name</th>
      <th>Status</th>
      <th>Expected End Date</th>
      <th>Hours Worked</th>
    </tr>
  </thead>

  <tbody>
    <% @tasks.each do |task| %>
    <tr>
      <td>
        <%= task.name %>
      </td>
      <td>
        <%= task.status %>
      </td>
      <td>
        <%= task.expected_end_date.to_formatted_s(:short) %>
      </td>
      <td>
        <%= form_for task, url: update_task_logtime_path(task), remote: true, html: { method: :patch } do |form|%>
        <div class="row">
          <div class="col-md">
            <%= form.text_field :log_time , class: 'form-control' %>
          </div>
          <div class="col-md">
            <%= form.submit 'Submit log-time', class: 'btn btn-regular', id: task.name+"_submit" %>
          </div>
        </div>
        <% end %>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>
</div>
