<% provide(:title, "All Teams") %>
<p id="notice"><%= notice %></p>

<% if @teams.length > 0%>
<table id="teams_table" style="width:100%" class="table data table-hover dt-responsive">
  <thead>
    <tr>
      <th>TEAM PICTURE</th>
      <th>NAME</th>
      <th>TEAM LEADER</th>
      <th>TEAM MEMBERS</th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @teams.each do |team| %>
      <tr>
        <td><%= image_tag team.team_pic.url(:thumb),class: "rounded-circle team-pic",style:'width:90px; height:50px' %></td>
        <td><%= team.name.downcase.titleize %></td>
        <td><%= team.employee_lists(Team::EMPLOYEE_TYPE[:team_leader]).map(&:name).first.downcase.capitalize %></td>
        <td><%= team.employee_lists(Team::EMPLOYEE_TYPE[:team_member]).count %></td>
        <td>
                    <div class="actions">
            <%= link_to department_team_path(team.department,team) do %>
            <i title="Show Team" class="table-options action-show fas fa-eye"></i>
            <% end %>
            <% if can? :create, team %>
            <%= link_to edit_department_team_path(team.department,team) do %>
            <i title="Edit Team" class="table-options action-edit fas fa-edit"></i>
            <% end %>
            <%= link_to department_team_path(team.department,team), method: :delete, data: { confirm: 'Are you sure?' } do %>  
            <i title="Delete Team" class="table-options action-delete fas fa-trash"></i>
            <% end %>
            <% end %>
          </div>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<% end %>
<br>
<%= link_to 'New Team', new_department_team_path, class: "btn btn-regular" %>
<%= link_to 'Back', departments_url, class: "btn btn-secondary" %>
